<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-terminal-4.7.0">
    
    <meta name="description" content="Documentation for the Floxide framework - A type-safe, composable directed graph workflow system written in Rust"> 
    
    <meta name="author" content="Floxide Team"> 
    <link rel="icon" type="image/png" sizes="192x192" href="../../img/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="512x512" href="../../img/android-chrome-512x512.png" />
<link rel="apple-touch-icon" sizes="180x180" href="../../img/apple-touch-icon.png" />
<link rel="shortcut icon" type="image/png" sizes="48x48" href="../../img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="../../img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="../../img/favicon-32x32.png" />


    
 
<title>Event-Driven Workflow Pattern - Floxide Documentation</title>


<link href="../../css/fontawesome/css/fontawesome.min.css" rel="stylesheet">
<link href="../../css/fontawesome/css/solid.min.css" rel="stylesheet">
<link href="../../css/normalize.css" rel="stylesheet">
<link href="../../css/terminal.css" rel="stylesheet">
<link href="../../css/theme.css" rel="stylesheet">
<link href="../../css/theme.tile_grid.css" rel="stylesheet">
<link href="../../css/theme.footer.css" rel="stylesheet">
<!-- dark color palette -->
<link href="../../css/palettes/dark.css" rel="stylesheet">

<!-- page layout -->
<style>
/* initially set page layout to a one column grid */
.terminal-mkdocs-main-grid {
    display: grid;
    grid-column-gap: 1.4em;
    grid-template-columns: auto;
    grid-template-rows: auto;
}

/*  
*   when side navigation is not hidden, use a two column grid.  
*   if the screen is too narrow, fall back to the initial one column grid layout.
*   in this case the main content will be placed under the navigation panel. 
*/
@media only screen and (min-width: 70em) {
    .terminal-mkdocs-main-grid {
        grid-template-columns: 4fr 9fr;
    }
}</style>



    
    <link href="../../css/extra.css" rel="stylesheet">  
    
    

    
    <!-- search css support -->
<link href="../../css/search/bootstrap-modal.css" rel="stylesheet">
<!-- search scripts -->
<script>
    var base_url = "../..",
    shortcuts = "{}";
</script>
<script src="../../js/jquery/jquery-1.10.1.min.js" defer></script>
<script src="../../js/bootstrap/bootstrap.min.js" defer></script>
<script src="../../js/mkdocs/base.js" defer></script>
    
    
    
    
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <script src="../../search/main.js"></script>
    

    
</head>

<body class="terminal"><div class="container">
    <div class="terminal-nav">
        <header class="terminal-logo">
            <div id="mkdocs-terminal-site-name" class="logo terminal-prompt"><a href="/" class="no-style">Floxide Documentation</a></div>
        </header>
        
        <nav class="terminal-menu">
            
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../.." class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Home</span>
                    </a>
                    <meta property="position" content="0">
                </li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../contributing/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Contributing</span>
                    </a>
                    <meta property="position" content="1">
                </li>
                
                    
                    


<li property="itemListElement" typeof="ListItem">
    <a href="#" class="menu-item" data-toggle="modal" data-target="#mkdocs_search_modal" property="item" typeof="SearchAction">
        <i aria-hidden="true" class="fa fa-search"></i> <span property="name">Search</span>
    </a>
    <meta property="position" content="2">
</li>
                    
            </ul>
            
        </nav>
    </div>
</div>
        
    <div class="container">
        <div class="terminal-mkdocs-main-grid"><aside id="terminal-mkdocs-side-panel"><nav>
  
    <ul class="terminal-mkdocs-side-nav-items">
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../..">Home</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">Getting Started</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../getting-started/installation/">Installation</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../getting-started/quick-start/">Quick Start</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../getting-started/error-handling/">Error Handling</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">Core Concepts</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../core-concepts/overview/">Overview</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../core-concepts/nodes/">Nodes</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../core-concepts/workflows/">Workflows</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../core-concepts/actions/">Actions</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../core-concepts/contexts/">Contexts</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">Guides</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../guides/event_driven_architecture/">Event-Driven Architecture</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../guides/using-mermaid-diagrams/">Using Mermaid Diagrams</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">Examples</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../examples/basic-workflow/">Basic Workflow</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../examples/event-driven-workflow/">Event-Driven Workflow</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../examples/timer-node/">Timer Node</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../examples/reactive-node/">Reactive Node</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../examples/transform-node/">Transform Node</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../examples/longrunning-node/">Long-Running Node</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../examples/batch-processing/">Batch Processing</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        <span class="
        
    

    terminal-mkdocs-side-nav-item--active terminal-mkdocs-side-nav-section-no-index">Architecture</span>
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../adr-process/">ADR Process</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../core-framework-abstractions/">Core Framework Abstractions</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../project-structure/">Project Structure</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../async-runtime-selection/">Async Runtime Selection</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../node-lifecycle-methods/">Node Lifecycle Methods</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        <span class="

    terminal-mkdocs-side-nav-item--active">Event-Driven Workflow Pattern</span>
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../reactive-node-implementation/">Reactive Node Implementation</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../timer-node-implementation/">Timer Node Implementation</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../longrunning-node-implementation/">Long-Running Node Implementation</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../transform-node-implementation/">Transform Node Implementation</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../batch-processing-implementation/">Batch Processing Implementation</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">API Reference</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../api/floxide-core/">floxide-core</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../api/floxide-transform/">floxide-transform</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../api/floxide-event/">floxide-event</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../api/floxide-timer/">floxide-timer</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../api/floxide-reactive/">floxide-reactive</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../api/floxide-longrunning/">floxide-longrunning</a>
        
    
    </li>
            
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../api/floxide-batch/">floxide-batch</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../contributing/">Contributing</a>
        
    
    
    
  </li>
        
    </ul>
  
</nav><hr>
<nav>
    <ul>
        <li><a href="#event-driven-workflow-pattern">Event-Driven Workflow Pattern</a></li>
        <li><a href="#overview">Overview</a></li><li><a href="#core-concepts">Core Concepts</a></li><li><a href="#eventdrivennode">EventDrivenNode</a></li><li><a href="#event-sources">Event Sources</a></li><li><a href="#eventdrivenworkflow">EventDrivenWorkflow</a></li><li><a href="#event-routing">Event Routing</a></li><li><a href="#integration-with-standard-workflows">Integration with Standard Workflows</a></li><li><a href="#usage-example">Usage Example</a></li><li><a href="#conclusion">Conclusion</a></li>
    </ul>
</nav>
</aside>
            <main id="terminal-mkdocs-main-content">
<section id="mkdocs-terminal-content">
    <h1 id="event-driven-workflow-pattern">Event-Driven Workflow Pattern<a class="headerlink" href="#event-driven-workflow-pattern" title="Permanent link">&para;</a></h1>
<p>This document describes the event-driven workflow pattern in the Floxide framework.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The event-driven workflow pattern extends the Floxide framework to support asynchronous, event-based processing. This pattern is essential for building reactive systems that respond to external events in real-time.</p>
<h2 id="core-concepts">Core Concepts<a class="headerlink" href="#core-concepts" title="Permanent link">&para;</a></h2>
<p>The event-driven workflow pattern is built around several key concepts:</p>
<ol>
<li><strong>EventDrivenNode</strong>: A specialized node that waits for and processes events</li>
<li><strong>Event Sources</strong>: Components that provide events from external systems</li>
<li><strong>EventDrivenWorkflow</strong>: A workflow that orchestrates event-driven nodes</li>
<li><strong>Event Routing</strong>: Mechanisms for routing events between nodes</li>
</ol>
<h2 id="eventdrivennode">EventDrivenNode<a class="headerlink" href="#eventdrivennode" title="Permanent link">&para;</a></h2>
<p>The <code>EventDrivenNode</code> trait defines how nodes that respond to events should behave:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-0-1"><span class="cp">#[async_trait]</span>
</span><span id="__span-0-2"><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">EventDrivenNode</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">:</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span>
</span><span id="__span-0-3"><span class="k">where</span>
</span><span id="__span-0-4"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-0-5"><span class="p">{</span>
</span><span id="__span-0-6"><span class="w">    </span><span class="sd">/// Get the node&#39;s unique identifier</span>
</span><span id="__span-0-7"><span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">NodeId</span><span class="p">;</span>
</span><span id="__span-0-8">
</span><span id="__span-0-9"><span class="w">    </span><span class="sd">/// Wait for an event to arrive</span>
</span><span id="__span-0-10"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">wait_for_event</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-0-11">
</span><span id="__span-0-12"><span class="w">    </span><span class="sd">/// Process an event and return an action</span>
</span><span id="__span-0-13"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">process_event</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">:</span><span class="w"> </span><span class="nc">E</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">EventAction</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-0-14"><span class="p">}</span>
</span></code></pre></div>
<p>A concrete implementation of <code>EventDrivenNode</code> typically connects to an event source and processes events:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-1-1"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">SensorMonitorNode</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="nc">NodeId</span><span class="p">,</span>
</span><span id="__span-1-3"><span class="w">    </span><span class="n">event_source</span><span class="p">:</span><span class="w"> </span><span class="nc">Arc</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">EventSource</span><span class="o">&lt;</span><span class="n">SensorEvent</span><span class="o">&gt;&gt;</span><span class="p">,</span>
</span><span id="__span-1-4"><span class="w">    </span><span class="n">threshold</span><span class="p">:</span><span class="w"> </span><span class="kt">f64</span><span class="p">,</span>
</span><span id="__span-1-5"><span class="p">}</span>
</span><span id="__span-1-6">
</span><span id="__span-1-7"><span class="cp">#[async_trait]</span>
</span><span id="__span-1-8"><span class="k">impl</span><span class="w"> </span><span class="n">EventDrivenNode</span><span class="o">&lt;</span><span class="n">SensorEvent</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">SensorMonitorNode</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-9"><span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">NodeId</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-10"><span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">id</span>
</span><span id="__span-1-11"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-12">
</span><span id="__span-1-13"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">wait_for_event</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">SensorEvent</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-14"><span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">event_source</span><span class="p">.</span><span class="n">next_event</span><span class="p">().</span><span class="k">await</span>
</span><span id="__span-1-15"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-16">
</span><span id="__span-1-17"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">process_event</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">:</span><span class="w"> </span><span class="nc">SensorEvent</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">EventAction</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-18"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">threshold</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-19"><span class="w">            </span><span class="nb">Ok</span><span class="p">(</span><span class="n">EventAction</span><span class="p">::</span><span class="n">Route</span><span class="p">(</span><span class="s">&quot;high_value_handler&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">))</span>
</span><span id="__span-1-20"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-21"><span class="w">            </span><span class="nb">Ok</span><span class="p">(</span><span class="n">EventAction</span><span class="p">::</span><span class="n">Route</span><span class="p">(</span><span class="s">&quot;standard_handler&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">))</span>
</span><span id="__span-1-22"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-23"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-24"><span class="p">}</span>
</span></code></pre></div>
<h2 id="event-sources">Event Sources<a class="headerlink" href="#event-sources" title="Permanent link">&para;</a></h2>
<p>Event sources provide events from external systems:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-2-1"><span class="cp">#[async_trait]</span>
</span><span id="__span-2-2"><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">EventSource</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">:</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span>
</span><span id="__span-2-3"><span class="k">where</span>
</span><span id="__span-2-4"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-2-5"><span class="p">{</span>
</span><span id="__span-2-6"><span class="w">    </span><span class="sd">/// Get the next event from the source</span>
</span><span id="__span-2-7"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">next_event</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-2-8">
</span><span id="__span-2-9"><span class="w">    </span><span class="sd">/// Check if the source has more events</span>
</span><span id="__span-2-10"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">has_more_events</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-2-11"><span class="p">}</span>
</span></code></pre></div>
<p>The framework provides several built-in event sources:</p>
<h3 id="channeleventsource">ChannelEventSource<a class="headerlink" href="#channeleventsource" title="Permanent link">&para;</a></h3>
<p>Uses Tokio MPSC channels to receive events:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-3-1"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ChannelEventSource</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-3-2"><span class="k">where</span>
</span><span id="__span-3-3"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-3-4"><span class="p">{</span>
</span><span id="__span-3-5"><span class="w">    </span><span class="n">receiver</span><span class="p">:</span><span class="w"> </span><span class="nc">Mutex</span><span class="o">&lt;</span><span class="n">mpsc</span><span class="p">::</span><span class="n">Receiver</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;&gt;</span><span class="p">,</span>
</span><span id="__span-3-6"><span class="p">}</span>
</span><span id="__span-3-7">
</span><span id="__span-3-8"><span class="k">impl</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ChannelEventSource</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-3-9"><span class="k">where</span>
</span><span id="__span-3-10"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-3-11"><span class="p">{</span>
</span><span id="__span-3-12"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">new</span><span class="p">(</span><span class="n">receiver</span><span class="p">:</span><span class="w"> </span><span class="nc">mpsc</span><span class="p">::</span><span class="n">Receiver</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-13"><span class="w">        </span><span class="bp">Self</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-14"><span class="w">            </span><span class="n">receiver</span><span class="p">:</span><span class="w"> </span><span class="nc">Mutex</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">receiver</span><span class="p">),</span>
</span><span id="__span-3-15"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-3-16"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-17">
</span><span id="__span-3-18"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">sender</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">mpsc</span><span class="p">::</span><span class="n">Sender</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-19"><span class="w">        </span><span class="c1">// Return a sender connected to this receiver</span>
</span><span id="__span-3-20"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-21"><span class="p">}</span>
</span><span id="__span-3-22">
</span><span id="__span-3-23"><span class="cp">#[async_trait]</span>
</span><span id="__span-3-24"><span class="k">impl</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">EventSource</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">ChannelEventSource</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-3-25"><span class="k">where</span>
</span><span id="__span-3-26"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-3-27"><span class="p">{</span>
</span><span id="__span-3-28"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">next_event</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-29"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">receiver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">receiver</span><span class="p">.</span><span class="n">lock</span><span class="p">().</span><span class="k">await</span><span class="p">;</span>
</span><span id="__span-3-30"><span class="w">        </span><span class="n">receiver</span><span class="p">.</span><span class="n">recv</span><span class="p">().</span><span class="k">await</span><span class="p">.</span><span class="n">ok_or</span><span class="p">(</span><span class="n">FloxideError</span><span class="p">::</span><span class="n">EventSourceClosed</span><span class="p">)</span>
</span><span id="__span-3-31"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-32">
</span><span id="__span-3-33"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">has_more_events</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-34"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">receiver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">receiver</span><span class="p">.</span><span class="n">lock</span><span class="p">().</span><span class="k">await</span><span class="p">;</span>
</span><span id="__span-3-35"><span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="o">!</span><span class="n">receiver</span><span class="p">.</span><span class="n">is_closed</span><span class="p">())</span>
</span><span id="__span-3-36"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-37"><span class="p">}</span>
</span></code></pre></div>
<h2 id="eventdrivenworkflow">EventDrivenWorkflow<a class="headerlink" href="#eventdrivenworkflow" title="Permanent link">&para;</a></h2>
<p>The <code>EventDrivenWorkflow</code> orchestrates event-driven nodes:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-4-1"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">EventDrivenWorkflow</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-4-2"><span class="k">where</span>
</span><span id="__span-4-3"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Clone</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-4-4"><span class="p">{</span>
</span><span id="__span-4-5"><span class="w">    </span><span class="n">nodes</span><span class="p">:</span><span class="w"> </span><span class="nc">HashMap</span><span class="o">&lt;</span><span class="n">NodeId</span><span class="p">,</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">EventDrivenNode</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;&gt;&gt;</span><span class="p">,</span>
</span><span id="__span-4-6"><span class="w">    </span><span class="n">routes</span><span class="p">:</span><span class="w"> </span><span class="nc">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">NodeId</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-7"><span class="w">    </span><span class="n">initial_node</span><span class="p">:</span><span class="w"> </span><span class="nc">NodeId</span><span class="p">,</span>
</span><span id="__span-4-8"><span class="w">    </span><span class="n">timeout</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">Duration</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-9"><span class="p">}</span>
</span><span id="__span-4-10">
</span><span id="__span-4-11"><span class="k">impl</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">EventDrivenWorkflow</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-4-12"><span class="k">where</span>
</span><span id="__span-4-13"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Clone</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-4-14"><span class="p">{</span>
</span><span id="__span-4-15"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">new</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-16"><span class="w">        </span><span class="bp">Self</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-17"><span class="w">            </span><span class="n">nodes</span><span class="p">:</span><span class="w"> </span><span class="nc">HashMap</span><span class="p">::</span><span class="n">new</span><span class="p">(),</span>
</span><span id="__span-4-18"><span class="w">            </span><span class="n">routes</span><span class="p">:</span><span class="w"> </span><span class="nc">HashMap</span><span class="p">::</span><span class="n">new</span><span class="p">(),</span>
</span><span id="__span-4-19"><span class="w">            </span><span class="n">initial_node</span><span class="p">:</span><span class="w"> </span><span class="nc">NodeId</span><span class="p">::</span><span class="n">new</span><span class="p">(),</span>
</span><span id="__span-4-20"><span class="w">            </span><span class="n">timeout</span><span class="p">:</span><span class="w"> </span><span class="nb">None</span><span class="p">,</span>
</span><span id="__span-4-21"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-22"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-23">
</span><span id="__span-4-24"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">add_node</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">node</span><span class="p">:</span><span class="w"> </span><span class="nc">impl</span><span class="w"> </span><span class="n">EventDrivenNode</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">NodeId</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-25"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">id</span><span class="p">();</span>
</span><span id="__span-4-26"><span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">nodes</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="nb">Box</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">node</span><span class="p">));</span>
</span><span id="__span-4-27"><span class="w">        </span><span class="n">id</span>
</span><span id="__span-4-28"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-29">
</span><span id="__span-4-30"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">set_route</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="n">target_node</span><span class="p">:</span><span class="w"> </span><span class="nc">NodeId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-31"><span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">routes</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">target_node</span><span class="p">);</span>
</span><span id="__span-4-32"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-33">
</span><span id="__span-4-34"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">set_initial_node</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">node_id</span><span class="p">:</span><span class="w"> </span><span class="nc">NodeId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-35"><span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">initial_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node_id</span><span class="p">;</span>
</span><span id="__span-4-36"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-37">
</span><span id="__span-4-38"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">set_timeout</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="p">:</span><span class="w"> </span><span class="nc">Duration</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-39"><span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">timeout</span><span class="p">);</span>
</span><span id="__span-4-40"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-41">
</span><span id="__span-4-42"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-43"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">current_node_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">initial_node</span><span class="p">;</span>
</span><span id="__span-4-44">
</span><span id="__span-4-45"><span class="w">        </span><span class="k">loop</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-46"><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">nodes</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_node_id</span><span class="p">)</span>
</span><span id="__span-4-47"><span class="w">                </span><span class="p">.</span><span class="n">ok_or_else</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="n">FloxideError</span><span class="p">::</span><span class="n">NodeNotFound</span><span class="p">(</span><span class="n">current_node_id</span><span class="p">))</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-4-48">
</span><span id="__span-4-49"><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">wait_for_event</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-4-50"><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-4-51">
</span><span id="__span-4-52"><span class="w">            </span><span class="k">match</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-53"><span class="w">                </span><span class="n">EventAction</span><span class="p">::</span><span class="n">Route</span><span class="p">(</span><span class="n">route</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-54"><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">next_node_id</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">routes</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">route</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-55"><span class="w">                        </span><span class="n">current_node_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">next_node_id</span><span class="p">;</span>
</span><span id="__span-4-56"><span class="w">                    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-57"><span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">FloxideError</span><span class="p">::</span><span class="n">RouteNotFound</span><span class="p">(</span><span class="n">route</span><span class="p">));</span>
</span><span id="__span-4-58"><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-4-59"><span class="w">                </span><span class="p">},</span>
</span><span id="__span-4-60"><span class="w">                </span><span class="n">EventAction</span><span class="p">::</span><span class="n">Terminate</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-61"><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-4-62"><span class="w">                </span><span class="p">},</span>
</span><span id="__span-4-63"><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-64"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-65">
</span><span id="__span-4-66"><span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span>
</span><span id="__span-4-67"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-68"><span class="p">}</span>
</span></code></pre></div>
<h2 id="event-routing">Event Routing<a class="headerlink" href="#event-routing" title="Permanent link">&para;</a></h2>
<p>Events are routed between nodes based on the actions returned by <code>process_event</code>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-5-1"><span class="k">pub</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="nc">EventAction</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-5-2"><span class="k">where</span>
</span><span id="__span-5-3"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-5-4"><span class="p">{</span>
</span><span id="__span-5-5"><span class="w">    </span><span class="sd">/// Route the event to another node</span>
</span><span id="__span-5-6"><span class="w">    </span><span class="n">Route</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p">),</span>
</span><span id="__span-5-7">
</span><span id="__span-5-8"><span class="w">    </span><span class="sd">/// Terminate the workflow</span>
</span><span id="__span-5-9"><span class="w">    </span><span class="n">Terminate</span><span class="p">,</span>
</span><span id="__span-5-10"><span class="p">}</span>
</span></code></pre></div>
<h2 id="integration-with-standard-workflows">Integration with Standard Workflows<a class="headerlink" href="#integration-with-standard-workflows" title="Permanent link">&para;</a></h2>
<p>The event-driven pattern can be integrated with standard workflows:</p>
<h3 id="eventdrivennodeadapter">EventDrivenNodeAdapter<a class="headerlink" href="#eventdrivennodeadapter" title="Permanent link">&para;</a></h3>
<p>Adapts an event-driven node to be used in a standard workflow:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-6-1"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">EventDrivenNodeAdapter</span><span class="o">&lt;</span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
</span><span id="__span-6-2"><span class="k">where</span>
</span><span id="__span-6-3"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-6-4"><span class="w">    </span><span class="n">N</span><span class="p">:</span><span class="w"> </span><span class="nc">EventDrivenNode</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-6-5"><span class="p">{</span>
</span><span id="__span-6-6"><span class="w">    </span><span class="n">node</span><span class="p">:</span><span class="w"> </span><span class="nc">N</span><span class="p">,</span>
</span><span id="__span-6-7"><span class="w">    </span><span class="n">_phantom</span><span class="p">:</span><span class="w"> </span><span class="nc">PhantomData</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-6-8"><span class="p">}</span>
</span><span id="__span-6-9">
</span><span id="__span-6-10"><span class="k">impl</span><span class="o">&lt;</span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">EventDrivenNodeAdapter</span><span class="o">&lt;</span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
</span><span id="__span-6-11"><span class="k">where</span>
</span><span id="__span-6-12"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-6-13"><span class="w">    </span><span class="n">N</span><span class="p">:</span><span class="w"> </span><span class="nc">EventDrivenNode</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-6-14"><span class="p">{</span>
</span><span id="__span-6-15"><span class="w">    </span><span class="k">type</span><span class="w"> </span><span class="nc">Context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EventContext</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-6-16">
</span><span id="__span-6-17"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">ctx</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="bp">Self</span><span class="p">::</span><span class="n">Context</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">NextAction</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-18"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">node</span><span class="p">.</span><span class="n">wait_for_event</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-6-19"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">node</span><span class="p">.</span><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-6-20">
</span><span id="__span-6-21"><span class="w">        </span><span class="c1">// Convert EventAction to NextAction</span>
</span><span id="__span-6-22"><span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-23"><span class="w">            </span><span class="n">EventAction</span><span class="p">::</span><span class="n">Route</span><span class="p">(</span><span class="n">route</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-24"><span class="w">                </span><span class="n">ctx</span><span class="p">.</span><span class="n">set_event</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
</span><span id="__span-6-25"><span class="w">                </span><span class="nb">Ok</span><span class="p">(</span><span class="n">NextAction</span><span class="p">::</span><span class="n">Route</span><span class="p">(</span><span class="n">route</span><span class="p">))</span>
</span><span id="__span-6-26"><span class="w">            </span><span class="p">},</span>
</span><span id="__span-6-27"><span class="w">            </span><span class="n">EventAction</span><span class="p">::</span><span class="n">Terminate</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-28"><span class="w">                </span><span class="nb">Ok</span><span class="p">(</span><span class="n">NextAction</span><span class="p">::</span><span class="n">Terminate</span><span class="p">)</span>
</span><span id="__span-6-29"><span class="w">            </span><span class="p">},</span>
</span><span id="__span-6-30"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-31"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-32"><span class="p">}</span>
</span></code></pre></div>
<h3 id="nestedeventdrivenworkflow">NestedEventDrivenWorkflow<a class="headerlink" href="#nestedeventdrivenworkflow" title="Permanent link">&para;</a></h3>
<p>Uses an event-driven workflow as a node in a standard workflow:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-7-1"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">NestedEventDrivenWorkflow</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-7-2"><span class="k">where</span>
</span><span id="__span-7-3"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Clone</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-7-4"><span class="p">{</span>
</span><span id="__span-7-5"><span class="w">    </span><span class="n">workflow</span><span class="p">:</span><span class="w"> </span><span class="nc">EventDrivenWorkflow</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-7-6"><span class="p">}</span>
</span><span id="__span-7-7">
</span><span id="__span-7-8"><span class="k">impl</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">NestedEventDrivenWorkflow</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span><span id="__span-7-9"><span class="k">where</span>
</span><span id="__span-7-10"><span class="w">    </span><span class="n">E</span><span class="p">:</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Clone</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span>
</span><span id="__span-7-11"><span class="p">{</span>
</span><span id="__span-7-12"><span class="w">    </span><span class="k">type</span><span class="w"> </span><span class="nc">Context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Context</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-7-13">
</span><span id="__span-7-14"><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">_ctx</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="bp">Self</span><span class="p">::</span><span class="n">Context</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">NextAction</span><span class="p">,</span><span class="w"> </span><span class="n">FloxideError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-15"><span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">workflow</span><span class="p">.</span><span class="n">run</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-7-16"><span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">NextAction</span><span class="p">::</span><span class="n">Continue</span><span class="p">)</span>
</span><span id="__span-7-17"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-18"><span class="p">}</span>
</span></code></pre></div>
<h2 id="usage-example">Usage Example<a class="headerlink" href="#usage-example" title="Permanent link">&para;</a></h2>
<p>Here's an example of using the event-driven workflow pattern:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-8-1"><span class="c1">// Define an event type</span>
</span><span id="__span-8-2"><span class="cp">#[derive(Clone)]</span>
</span><span id="__span-8-3"><span class="k">struct</span><span class="w"> </span><span class="nc">SensorEvent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-4"><span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
</span><span id="__span-8-5"><span class="w">    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="kt">f64</span><span class="p">,</span>
</span><span id="__span-8-6"><span class="w">    </span><span class="n">timestamp</span><span class="p">:</span><span class="w"> </span><span class="nc">DateTime</span><span class="o">&lt;</span><span class="n">Utc</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-8-7"><span class="p">}</span>
</span><span id="__span-8-8">
</span><span id="__span-8-9"><span class="k">impl</span><span class="w"> </span><span class="n">Event</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">SensorEvent</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-8-10">
</span><span id="__span-8-11"><span class="c1">// Create event sources</span>
</span><span id="__span-8-12"><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">tx1</span><span class="p">,</span><span class="w"> </span><span class="n">rx1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpsc</span><span class="p">::</span><span class="n">channel</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-8-13"><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">tx2</span><span class="p">,</span><span class="w"> </span><span class="n">rx2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpsc</span><span class="p">::</span><span class="n">channel</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-8-14">
</span><span id="__span-8-15"><span class="kd">let</span><span class="w"> </span><span class="n">source1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ChannelEventSource</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">rx1</span><span class="p">);</span>
</span><span id="__span-8-16"><span class="kd">let</span><span class="w"> </span><span class="n">source2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ChannelEventSource</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">rx2</span><span class="p">);</span>
</span><span id="__span-8-17">
</span><span id="__span-8-18"><span class="c1">// Create event-driven nodes</span>
</span><span id="__span-8-19"><span class="kd">let</span><span class="w"> </span><span class="n">sensor_monitor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SensorMonitorNode</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">&quot;sensor1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Arc</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">source1</span><span class="p">),</span><span class="w"> </span><span class="mf">100.0</span><span class="p">);</span>
</span><span id="__span-8-20"><span class="kd">let</span><span class="w"> </span><span class="n">high_value_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HighValueHandlerNode</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">&quot;high_value&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Arc</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">source2</span><span class="p">));</span>
</span><span id="__span-8-21"><span class="kd">let</span><span class="w"> </span><span class="n">standard_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StandardHandlerNode</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">&quot;standard&quot;</span><span class="p">);</span>
</span><span id="__span-8-22">
</span><span id="__span-8-23"><span class="c1">// Create and configure the workflow</span>
</span><span id="__span-8-24"><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">workflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EventDrivenWorkflow</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
</span><span id="__span-8-25">
</span><span id="__span-8-26"><span class="kd">let</span><span class="w"> </span><span class="n">monitor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workflow</span><span class="p">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">sensor_monitor</span><span class="p">);</span>
</span><span id="__span-8-27"><span class="kd">let</span><span class="w"> </span><span class="n">high_value_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workflow</span><span class="p">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">high_value_handler</span><span class="p">);</span>
</span><span id="__span-8-28"><span class="kd">let</span><span class="w"> </span><span class="n">standard_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">workflow</span><span class="p">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">standard_handler</span><span class="p">);</span>
</span><span id="__span-8-29">
</span><span id="__span-8-30"><span class="n">workflow</span><span class="p">.</span><span class="n">set_initial_node</span><span class="p">(</span><span class="n">monitor_id</span><span class="p">);</span>
</span><span id="__span-8-31"><span class="n">workflow</span><span class="p">.</span><span class="n">set_route</span><span class="p">(</span><span class="s">&quot;high_value_handler&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">high_value_id</span><span class="p">);</span>
</span><span id="__span-8-32"><span class="n">workflow</span><span class="p">.</span><span class="n">set_route</span><span class="p">(</span><span class="s">&quot;standard_handler&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">standard_id</span><span class="p">);</span>
</span><span id="__span-8-33"><span class="n">workflow</span><span class="p">.</span><span class="n">set_timeout</span><span class="p">(</span><span class="n">Duration</span><span class="p">::</span><span class="n">from_secs</span><span class="p">(</span><span class="mi">60</span><span class="p">));</span>
</span><span id="__span-8-34">
</span><span id="__span-8-35"><span class="c1">// Run the workflow</span>
</span><span id="__span-8-36"><span class="n">tokio</span><span class="p">::</span><span class="n">spawn</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="k">move</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-37"><span class="w">    </span><span class="n">workflow</span><span class="p">.</span><span class="n">run</span><span class="p">().</span><span class="k">await</span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span>
</span><span id="__span-8-38"><span class="p">});</span>
</span><span id="__span-8-39">
</span><span id="__span-8-40"><span class="c1">// Send events to the workflow</span>
</span><span id="__span-8-41"><span class="n">tx1</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">SensorEvent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-42"><span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sensor1&quot;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
</span><span id="__span-8-43"><span class="w">    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="mf">150.0</span><span class="p">,</span>
</span><span id="__span-8-44"><span class="w">    </span><span class="n">timestamp</span><span class="p">:</span><span class="w"> </span><span class="nc">Utc</span><span class="p">::</span><span class="n">now</span><span class="p">(),</span>
</span><span id="__span-8-45"><span class="p">}).</span><span class="k">await</span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span>
</span></code></pre></div>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>The event-driven workflow pattern in the Floxide framework provides a powerful and flexible approach to building reactive systems. By leveraging Rust's async capabilities and the framework's core abstractions, it enables efficient processing of asynchronous events while maintaining type safety and proper error handling.</p>
<p>For more detailed information on the event-driven workflow pattern, refer to the <a href="../../adrs/0009-event-driven-workflow-pattern/">Event-Driven Workflow Pattern ADR</a>.</p>
</section>

            </main>
        </div>
        <hr><footer>
    <div class="terminal-mkdocs-footer-grid">
        <div id="terminal-mkdocs-footer-copyright-info">
             Site built with <a href="http://www.mkdocs.org">MkDocs</a> and <a href="https://github.com/ntno/mkdocs-terminal">Terminal for MkDocs</a>.
        </div>
    </div>
</footer>
    </div>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="alertdialog" aria-modal="true" aria-labelledby="searchModalLabel">
    <div class="modal-dialog modal-lg" role="search">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="close btn btn-default btn-ghost" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p id="searchInputLabel">Type to start searching</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" aria-labelledby="searchInputLabel" placeholder="" id="mkdocs-search-query" title="Please enter search terms here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No document matches found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    
    
</body>

</html>